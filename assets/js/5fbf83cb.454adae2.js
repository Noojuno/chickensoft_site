"use strict";(self.webpackChunkchickensoft_site=self.webpackChunkchickensoft_site||[]).push([[7966],{3905:(e,t,o)=>{o.d(t,{Zo:()=>p,kt:()=>d});var a=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t){if(null==e)return{};var o,a,n=function(e,t){if(null==e)return{};var o,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var l=a.createContext({}),s=function(e){var t=a.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},p=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var o=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),m=s(o),d=n,g=m["".concat(l,".").concat(d)]||m[d]||u[d]||r;return o?a.createElement(g,i(i({ref:t},p),{},{components:o})):a.createElement(g,i({ref:t},p))}));function d(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=o.length,i=new Array(r);i[0]=m;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:n,i[1]=c;for(var s=2;s<r;s++)i[s]=o[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,o)}m.displayName="MDXCreateElement"},3994:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>c,toc:()=>s});var a=o(7462),n=(o(7294),o(3905));const r={title:"\ud83e\uddca Timer Logic Block",image:"../header.jpg"},i=void 0,c={unversionedId:"logic_blocks/tutorial/timer_logic_block",id:"logic_blocks/tutorial/timer_logic_block",title:"\ud83e\uddca Timer Logic Block",description:"To start off the tutorial, we'll start by making sure we have the right dependencies and then setup an empty logic block.",source:"@site/docs/logic_blocks/05_tutorial/01_timer_logic_block.md",sourceDirName:"logic_blocks/05_tutorial",slug:"/logic_blocks/tutorial/timer_logic_block",permalink:"/docs/logic_blocks/tutorial/timer_logic_block",draft:!1,editUrl:"https://github.com/chickensoft-games/chickensoft_site/tree/main/docs/logic_blocks/05_tutorial/01_timer_logic_block.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"\ud83e\uddca Timer Logic Block",image:"../header.jpg"},sidebar:"tutorialSidebar",previous:{title:"\u23f2\ufe0f Timer Tutorial",permalink:"/docs/logic_blocks/tutorial/"},next:{title:"\ud83d\udd06 Power",permalink:"/docs/logic_blocks/tutorial/power"}},l={},s=[{value:"\ud83d\udce6 Environment Setup",id:"-environment-setup",level:3},{value:"\ud83d\udcdd Creating a Logic Block",id:"-creating-a-logic-block",level:3}],p={toc:s};function u(e){let{components:t,...o}=e;return(0,n.kt)("wrapper",(0,a.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"To start off the tutorial, we'll start by making sure we have the right dependencies and then setup an empty logic block."),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"This tutorial assumes a high degree of familiarity with state machines and C#. If you're new to either, you may wish to ",(0,n.kt)("a",{parentName:"p",href:"http://rbwhitaker.wikidot.com/c-sharp-tutorials"},"learn more about C#")," or read the basics on ",(0,n.kt)("a",{parentName:"p",href:"../#-what-to-read-next"},"statecharts"),".")),(0,n.kt)("h3",{id:"-environment-setup"},"\ud83d\udce6 Environment Setup"),(0,n.kt)("p",null,"If you haven't already, make sure you've ",(0,n.kt)("a",{parentName:"p",href:"../installation"},"installed everything"),". You'll need LogicBlocks and the Chickensoft ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/chickensoft-games/Introspection"},"Introspection")," generator. Feel free to install the optional diagram generator so you can ",(0,n.kt)("a",{parentName:"p",href:"../#%EF%B8%8F-visualizing-logic-blocks"},"see your code as a state diagram"),"."),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"The introspection generator produces information about types at build time, allowing logic blocks to know about all the possible states when it runs. If we don't use the introspection generator, we'd have to manually create and register every state manually.")),(0,n.kt)("h3",{id:"-creating-a-logic-block"},"\ud83d\udcdd Creating a Logic Block"),(0,n.kt)("p",null,"To define a logic block, we simply make a class that extends ",(0,n.kt)("inlineCode",{parentName:"p"},"LogicBlock<TState>"),". By convention, we usually define our state inside the logic block itself as a ",(0,n.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/nested-types"},"nested type"),"."),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"If you don't define your state nested inside the logic block, the diagram generator won't be able to generate diagrams of your code since it won't know where to look to find your logic block's state.")),(0,n.kt)("p",null,"Let's go ahead and make an empty logic block for the timer."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-csharp"},"using Chickensoft.Introspection;\n\n[Meta, LogicBlock(typeof(State), Diagram = true)]\npublic partial class Timer : LogicBlock<Timer.State> {\n  public override Transition GetInitialState() => To<State.PoweredOff>();\n\n  public static class Input;\n\n  public static class Output;\n\n  public abstract partial record State : StateLogic<State> {\n    public record PoweredOff : State;\n  }\n}\n")),(0,n.kt)("p",null,"We've created an empty abstract base state, a starting state ",(0,n.kt)("inlineCode",{parentName:"p"},"PoweredOff"),", and two empty static classes which will store our input and output types. We've also specified that our initial state should be ",(0,n.kt)("inlineCode",{parentName:"p"},"PoweredOff"),"."),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"[Meta]")," attribute tells the Chickensoft ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/chickensoft-games/Introspection"},"Introspection")," generator that we want to generate additional metadata about our logic block at build time by making it an ",(0,n.kt)("em",{parentName:"p"},"introspective type"),". LogicBlocks is smart enough to know if it has been upgraded to an introspective type, and if it has, it will automatically identify the possible states and create them."),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"If you really don't want to use the introspection generator, you don't have to \u2014 but you'll have to register each state manually in the constructor. Here's what that would look like so far:"),(0,n.kt)("pre",{parentName:"admonition"},(0,n.kt)("code",{parentName:"pre",className:"language-csharp"},"public Timer() {\n  Set(new PoweredOff()); // Do this for each possible state.\n}\n")),(0,n.kt)("p",{parentName:"admonition"},"For best results, just use the introspection generator: it prevents human error by protecting you against forgetting to register a state type, especially as you refactor your code and change up the state type hierarchy \u2014 a common occurrence when working with state machines.")))}u.isMDXComponent=!0}}]);